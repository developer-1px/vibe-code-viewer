/**
 * Vibe Code Viewer - Main Styles
 *
 * Structure:
 * 1. Tailwind CSS base
 * 2. Import LIMN Design System (from design-system/styles/globals.css)
 * 3. Vibe-specific customizations (code themes, focus mode)
 */

/* ===== 1. Tailwind CSS ===== */
@import "tailwindcss";

/* ===== 2. LIMN Design System Base ===== */
@import "./limn.css";

/* ===== 3. Vibe Code Viewer Customizations ===== */

@layer base {
  :root {
    /* Code Editor Syntax - Default Theme (LIMN Warm) */
    --code-keyword: #ffcc99;
    --code-function: #ffd699;
    --code-class: #e5c07b;
    --code-variable: #ffffff;
    --code-string: #d4a574;
    --code-number: #cbd5e1;
    --code-comment: rgb(255 250 245 / 0.5);
    --code-property: #d4d4d8;
    --code-tag: #ffb366;
    --code-attribute: #cbd5e1;
    --code-punctuation: rgb(255 250 245 / 0.6);

    /* Interactive Elements - Can be overridden by ThemeAdapter */
    --code-self: var(--color-warm-300);           /* Definition (self reference) */
    --code-self-bg: var(--color-warm-500);        /* Definition background */
    --code-external-import: #4ade80;              /* External import */
    --code-external-import-bg: #4ade80;           /* External import background */
    --code-external-closure: var(--color-status-warning); /* Closure variable */
    --code-external-closure-bg: var(--color-status-warning); /* Closure background */
    --code-external-function: #a78bfa;            /* External function */
    --code-external-function-bg: #a78bfa;         /* External function background */
    --code-parameter: #fb923c;                    /* Function parameter */
    --code-parameter-bg: var(--color-warm-300);   /* Parameter background */
    --code-local-variable: var(--color-warm-400); /* Local variable */
    --code-local-variable-bg: var(--color-warm-500); /* Local variable background */

    /* Focus Mode Colors */
    --focus-gray: rgb(51 65 85);                  /* Unfocused grayscale */
  }

  /* VSCode Theme - Code Editor Syntax Only */
  [data-theme="vscode"] {
    --code-keyword: #569CD6;
    --code-function: #DCDCAA;
    --code-class: #4EC9B0;
    --code-variable: #9CDCFE;
    --code-string: #CE9178;
    --code-number: #B5CEA8;
    --code-comment: #6A9955;
    --code-property: #9CDCFE;
    --code-tag: #569CD6;
    --code-attribute: #9CDCFE;
    --code-punctuation: #cccccc;

    /* Interactive Elements */
    --code-self: #DCDCAA;
    --code-self-bg: #DCDCAA;
    --code-external-import: #4EC9B0;
    --code-external-import-bg: #4EC9B0;
    --code-external-closure: #CE9178;
    --code-external-closure-bg: #CE9178;
    --code-external-function: #C586C0;
    --code-external-function-bg: #C586C0;
    --code-parameter: #9CDCFE;
    --code-parameter-bg: #569CD6;
    --code-local-variable: #9CDCFE;
    --code-local-variable-bg: #4EC9B0;
  }

  /* JetBrains Theme - Code Editor Syntax Only */
  [data-theme="jetbrains"] {
    --code-keyword: #cf8e6d;
    --code-function: #56a8f5;
    --code-class: #9a7ecc;
    --code-variable: #bcbec4;
    --code-string: #6aab73;
    --code-number: #6aab73;
    --code-comment: #7a7e85;
    --code-property: #bcbec4;
    --code-tag: #cf8e6d;
    --code-attribute: #bcbec4;
    --code-punctuation: #bcbec4;

    /* Interactive Elements */
    --code-self: #56a8f5;
    --code-self-bg: #56a8f5;
    --code-external-import: #6aab73;
    --code-external-import-bg: #6aab73;
    --code-external-closure: #cf8e6d;
    --code-external-closure-bg: #cf8e6d;
    --code-external-function: #9a7ecc;
    --code-external-function-bg: #9a7ecc;
    --code-parameter: #bcbec4;
    --code-parameter-bg: #56a8f5;
    --code-local-variable: #bcbec4;
    --code-local-variable-bg: #6aab73;
  }
}

/* ===== Code Editor Syntax Utilities ===== */

@layer utilities {
  /* Text colors for code syntax highlighting */
  .text-editor-keyword { color: var(--code-keyword); }
  .text-editor-function { color: var(--code-function); }
  .text-editor-class { color: var(--code-class); }
  .text-editor-variable { color: var(--code-variable); }
  .text-editor-string { color: var(--code-string); }
  .text-editor-number { color: var(--code-number); }
  .text-editor-comment { color: var(--code-comment); }
  .text-editor-comment-focus { color: var(--code-comment); opacity: 1; }
  .text-editor-property { color: var(--code-property); }
  .text-editor-tag { color: var(--code-tag); }
  .text-editor-attribute { color: var(--code-attribute); }
  .text-editor-punctuation { color: var(--code-punctuation); }

  /* Generic text color */
  .text-editor-text { color: var(--code-variable); }

  /* Identifier colors */
  .text-editor-identifier {
    color: #ffffff;
    background-color: rgb(255 180 120 / 0.25);
    padding: 0 2px;
    border-radius: 2px;
  }
  .text-editor-identifier-def {
    color: #ffffff;
    background-color: rgb(255 180 120 / 0.4);
    padding: 0 2px;
    border-radius: 2px;
  }

  /* Interactive Elements - Text and Background */
  .text-code-self { color: var(--code-self); }
  .bg-code-self { background-color: var(--code-self-bg); }

  .text-code-external-import { color: var(--code-external-import); }
  .bg-code-external-import { background-color: var(--code-external-import-bg); }

  .text-code-external-closure { color: var(--code-external-closure); }
  .bg-code-external-closure { background-color: var(--code-external-closure-bg); }

  .text-code-external-function { color: var(--code-external-function); }
  .bg-code-external-function { background-color: var(--code-external-function-bg); }

  .text-code-parameter { color: var(--code-parameter); }
  .bg-code-parameter { background-color: var(--code-parameter-bg); }

  .text-code-local-variable { color: var(--code-local-variable); }
  .bg-code-local-variable { background-color: var(--code-local-variable-bg); }

  /* Focus mode grayscale */
  .text-editor-focus-gray { color: var(--focus-gray); }
}

/* ===== Custom Scrollbar ===== */

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--color-bg-base);
}

::-webkit-scrollbar-thumb {
  background: var(--color-border-medium);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-border-warm);
}
