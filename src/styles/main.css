/**
 * Vibe Code Viewer - Main Styles
 *
 * Structure:
 * 1. Tailwind CSS base
 * 2. Import LIMN Design System (from design-system/styles/globals.css)
 * 3. Vibe-specific customizations (code themes, focus mode)
 */

/* ===== 1. Tailwind CSS ===== */
@import "tailwindcss";

/* ===== 2. LIMN Design System Base ===== */
@import "./limn.css";

/* ===== 3. Vibe Code Viewer Customizations ===== */

@layer base {
  :root {
    /* Code Editor Syntax - LIMN Design System Colors */
    --code-keyword: var(--color-warm-300);        /* LIMN warm accent */
    --code-function: var(--color-status-info);    /* LIMN info blue */
    --code-class: var(--color-status-warning);    /* LIMN warning yellow */
    --code-variable: var(--color-text-primary);   /* LIMN primary text */
    --code-string: var(--color-status-success);   /* LIMN success green */
    --code-number: var(--color-status-error);     /* LIMN error coral */
    --code-comment: var(--color-text-tertiary);      /* LIMN muted text */
    --code-property: var(--color-status-info);    /* LIMN info blue */
    --code-tag: var(--color-status-warning);      /* LIMN warning yellow */
    --code-attribute: var(--color-status-info);   /* LIMN info blue */
    --code-punctuation: var(--color-text-secondary); /* LIMN secondary text */

    /* Interactive Elements - LIMN Design System */
    --code-self: var(--color-warm-300);           /* LIMN warm */
    --code-self-bg: var(--color-warm-300);
    --code-external-import: var(--color-status-success); /* LIMN green */
    --code-external-import-bg: var(--color-status-success);
    --code-external-closure: var(--color-status-error); /* LIMN coral */
    --code-external-closure-bg: var(--color-status-error);
    --code-external-function: var(--color-status-info); /* LIMN blue */
    --code-external-function-bg: var(--color-status-info);
    --code-parameter: var(--color-status-info);   /* LIMN blue */
    --code-parameter-bg: var(--color-status-info);
    --code-local-variable: var(--color-text-secondary); /* LIMN secondary */
    --code-local-variable-bg: var(--color-warm-300); /* LIMN warm */

    /* Focus Mode Colors */
    --focus-gray: rgb(51 65 85);                  /* Unfocused grayscale */

    /* Dead Code Styles - LIMN muted tones */
    --code-dead-text: var(--color-text-muted);    /* LIMN muted (더 어둡게) */
    --code-dead-bg: rgb(255 250 245 / 0.02);      /* 매우 미묘한 배경 */
    --code-dead-border: rgb(255 250 245 / 0.04);  /* 미묘한 테두리 */
    --code-dead-decoration: rgb(255 250 245 / 0.2); /* 흐린 취소선 */

    /* Return Statement Highlight - LIMN success tone */
    --code-return-bg: var(--color-status-success-bg); /* LIMN success bg (0.1) */

    /* Identifier Hover - LIMN warm hover */
    --code-identifier-hover-bg: var(--color-warm-active-hover); /* LIMN warm hover (0.12) */

    /* Identifier Styles - LIMN warm colors with higher visibility */
    --code-identifier-bg: rgb(255 200 150 / 0.15);      /* LIMN warm, more visible */
    --code-identifier-border: rgb(255 200 150 / 0.3);   /* LIMN warm border */
    --code-identifier-def-bg: rgb(255 200 150 / 0.25);  /* LIMN warm, def more visible */
    --code-identifier-def-border: rgb(255 200 150 / 0.5); /* LIMN warm, def border stronger */
  }
}

/* ===== Code Editor Syntax Utilities ===== */

@layer utilities {
  /* Text colors for code syntax highlighting */
  .text-editor-keyword { color: var(--code-keyword); }
  .text-editor-function { color: var(--code-function); }
  .text-editor-class { color: var(--code-class); }
  .text-editor-variable { color: var(--code-variable); }
  .text-editor-string { color: var(--code-string); }
  .text-editor-number { color: var(--code-number); }
  .text-editor-comment { color: var(--code-comment); }
  .text-editor-comment-focus { color: var(--code-comment); opacity: 1; }
  .text-editor-property { color: var(--code-property); }
  .text-editor-tag { color: var(--code-tag); }
  .text-editor-attribute { color: var(--code-attribute); }
  .text-editor-punctuation { color: var(--code-punctuation); }

  /* Generic text color */
  .text-editor-text { color: var(--code-variable); }

  /* Identifier colors - LIMN Design System */
  .text-editor-identifier {
    color: var(--color-text-primary);
    background-color: var(--code-identifier-def-bg);  /* LIMN warm (0.25) */
    padding: 0 2px;
    border-radius: 2px;
    box-shadow: inset 0 0 0 1px var(--code-identifier-def-border); /* Clickable - has outline */
  }
  .text-editor-identifier-def {
    color: var(--color-text-primary);
  }

  /* Interactive Elements - Text and Background */
  .text-code-self { color: var(--code-self); }
  .bg-code-self { background-color: var(--code-self-bg); }

  .text-code-external-import { color: var(--code-external-import); }
  .bg-code-external-import { background-color: var(--code-external-import-bg); }

  .text-code-external-closure { color: var(--code-external-closure); }
  .bg-code-external-closure { background-color: var(--code-external-closure-bg); }

  .text-code-external-function { color: var(--code-external-function); }
  .bg-code-external-function { background-color: var(--code-external-function-bg); }

  .text-code-parameter { color: var(--code-parameter); }
  .bg-code-parameter { background-color: var(--code-parameter-bg); }

  .text-code-local-variable { color: var(--code-local-variable); }
  .bg-code-local-variable { background-color: var(--code-local-variable-bg); }

  /* Focus mode grayscale */
  .text-editor-focus-gray { color: var(--focus-gray); }

  /* Dead Code Styles */
  .text-code-dead {
    color: var(--code-dead-text);
    opacity: 0.5;
  }

  .style-code-dead-import {
    display: inline-block;
    padding: 0 0.25rem;
    border-radius: 0.25rem;
    background-color: var(--code-dead-bg);
    color: rgb(148 163 184 / 0.6); /* slate-400/60 */
    border: 1px solid var(--code-dead-border);
    text-decoration: line-through;
    text-decoration-color: var(--code-dead-decoration);
    user-select: text;
    cursor: default;
  }

  /* Return Statement Highlight */
  .bg-code-return {
    background-color: var(--code-return-bg);
    padding: 0 0.125rem;
    border-radius: 0.25rem;
  }

  /* Identifier Hover */
  .hover-code-identifier:hover {
    background-color: var(--code-identifier-hover-bg);
  }

  /* Inactive Code Card - Grayscale Animation */
  .grayscale {
    filter: grayscale(100%);
    opacity: 0.6;
  }
}

/* ===== Custom Scrollbar ===== */

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--color-bg-base);
}

::-webkit-scrollbar-thumb {
  background: var(--color-border-medium);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-border-warm);
}
